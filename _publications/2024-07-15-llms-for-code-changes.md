---
title: "Unprecedented Code Change Automation: The Fusion of LLMs and Transformation by Example"
authors: '<i>Malinda Dilhara, Abhiram Bellur, Danny Dig, and Timofey Bryksin</i>'
status: "published"
collection: publications
permalink: /publications/2024-07-15-llms-for-code-changes
date: 2024-07-15
venue: "the proceedings of <b>FSE'24</b>"
level: 'A*'
paperurl: 'https://doi.org/10.1145/3643755'
pdf: 'https://arxiv.org/abs/2402.07138'
counter_id: 'C55'
data: 'https://pycrafttool.github.io/'
tool: 'https://github.com/PyCraftTool/PyCraft'
abstract: "<p><b>Abstract</b>. The naturalness inherent in software often leads developers to repeat the same code changes within a project or across different projects. These repetitive changes are known as “code change patterns” (CPATs). Automating CPATs is crucial to expedite the software development process. While current Transformation by Example (TBE) techniques can automate CPATs, they are limited by the quality and quantity of the provided input examples. Thus, they miss transforming code variations that do not have the exact syntax, data-, or control-flow of the provided input examples, despite being semantically similar. Large Language Models (LLMs), pre-trained on extensive source code datasets, offer a potential solution. Harnessing the capability of LLMs to generate semantically equivalent, yet previously unseen variants of the original CPAT could significantly increase the effectiveness of TBE systems.</p> <p>In this paper, we first discover best practices for harnessing LLMs to generate code variants that meet three criteria: correctness (semantic equivalence to the original CPAT), usefulness (absence of hallucinations), and applicability (aligning with the primary intent of the original CPAT). We then implement these practices in our tool PyCraft, which synergistically combines static code analysis, dynamic analysis, and LLM capabilities. By employing chain-of-thought reasoning, PyCraft generates both variations of input examples and comprehensive test cases that can identify correct variations with an F-measure of 96.6%. Our algorithm uses a fixed-point iteration to create relevant variations and expands the original input examples by a factor of 44x. Using these richly generated examples, we inferred transformation rules and then automated these changes, resulting in an increase of up to , with an average increase of 14x in target codes compared to a previous state-of-the-art tool that relies solely on static analysis. We submitted patches generated by PyCraft to a range of projects, notably esteemed ones like microsoft/DeepSpeed and IBM/inFairness. Their developers accepted and merged 83% the 86 CPAT instances submitted through 44 pull requests. This confirms the usefulness of these changes.</p>"
---